<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<main>
  <div class="recherche">
    <!-- Champ de recherche -->
    <div style="position: relative;">
      <input 
        type="text"
        placeholder="🔍 Rechercher..."
        [(ngModel)]="value"
        (input)="onInputChange($event)"
        style="border: none; border-radius: 25px; width: 250px; padding: 10px 16px;
              font-size: 14px; outline: none; box-shadow: 0 2px 6px rgba(0,0,0,0.2);
              transition: all 0.3s ease;"
      />

      <ul *ngIf="filteredCountries.length > 0" 
          style="position: absolute; top: 45px; left: 0; width: 100%; max-height: 200px;
                overflow-y: auto; background: white; border-radius: 8px; 
                box-shadow: 0 2px 6px rgba(0,0,0,0.2); list-style: none; padding: 0; margin: 0; z-index: 1000;">
        <li 
          *ngFor="let country of filteredCountries" 
          (click)="selectCountry(country)"
          style="padding: 8px 12px; cursor: pointer;"
          onmouseover="this.style.background='#f0f0f0'"
          onmouseout="this.style.background='white'"
        >
          {{ country }}
        </li>
      </ul>
    </div>

    <div class="boutton_recherche">
      <!-- Bouton de recherche -->
      <button 
        type="submit" 
        (click)="onSubmit()"
        style="
          background: linear-gradient(135deg, #007BFF, #0056b3);
          border: none;
          border-radius: 25px;
          padding: 10px 20px;
          font-size: 14px;
          font-weight: bold;
          color: white;
          cursor: pointer;
          box-shadow: 0 2px 6px rgba(0,0,0,0.2);
          transition: all 0.3s ease;
        "
        onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';"
        onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 6px rgba(0,0,0,0.2)';"
      >
        Rechercher
      </button>

      <button 
        type="submit" 
        (click)="onReset()"
        style="
          background: linear-gradient(135deg, #007BFF, #0056b3);
          border: none;
          border-radius: 25px;
          padding: 10px 20px;
          font-size: 14px;
          font-weight: bold;
          color: white;
          cursor: pointer;
          box-shadow: 0 2px 6px rgba(0,0,0,0.2);
          transition: all 0.3s ease;
          margin-left: 5%;
        "
        onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';"
        onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 6px rgba(0,0,0,0.2)';"
      >
        Reset
      </button>
    </div>
  </div>

  <!-- Conteneur de la carte -->
  <div class="map-container">
    <div class="map-wrapper">
      <div id="map"></div>
      @if (isDescriptionVisible) {
        <div id="descriptionMap">
          <i class="fa-solid fa-xmark" style="font-size:24px; cursor:pointer; width: 5%;"  (click)="closePopup()"></i>
          <img [src]="getImage"> 
          <p>{{ getDescription }}</p>
          @if (getUsername != null) {
            <button 
              type="submit" 
              (click)="onSubmitFav()"
              style="
                background: linear-gradient(135deg, #007BFF, #0056b3);
                margin: 0 5%;
                border: none;
                border-radius: 25px;
                padding: 10px 20px;
                font-size: 14px;
                font-weight: bold;
                color: white;
                cursor: pointer;
                box-shadow: 0 2px 6px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
              "
              onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';"
              onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 6px rgba(0,0,0,0.2)';"
            >
              Ajouter aux favoris
            </button>
          }
        </div>
      }
      @if (DescriptionLogo) {
        <div id="openDescriptionMap">
          <i class="fa-solid fa-bars" style="font-size:24px; cursor:pointer; padding: 100%;"  (click)="openPopup()"></i>
        </div>
      }
    </div>
  </div>
</main>